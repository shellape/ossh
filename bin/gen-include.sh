#!/bin/bash
# name:          gen-include.sh
# description:   Generate the ossh include config from ossh's default values.
# author:        vd@ghostshell.de
# version:       0.1
# tested on:     Debian Jessie
# vim: ts=3 sw=3 sts=3 et ai ci
set -e

PROG_NAME="${0##*/}"
ARGV="$@"
SCRIPT_CWD=$( cd ${0%/*} 2> /dev/null; pwd )
OSSH_BIN=ossh

if [[ $1 =~ -h|--help|help ]] || [[ $1 != -w ]]; then
   printf "Write include config file to stdout (using defaults of $OSSH_BIN).\n\n"
   printf "Usage: $PROG_NAME -w\n\n"
   printf "Optionally write it to the include config (e.g. ~/.ossh_include.conf)\n\n"
   exit 1
fi

cd $SCRIPT_CWD
echo "# Generated by $PROG_NAME"
awk -F'=' '{if($1 == "INCLUDE_CONF") exit; if($1 ~ /^[A-Z=]+/) print}' $OSSH_BIN

